"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _animate=_interopRequireDefault(require("@gov.au/animate"));require("../css/styles.css");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IDstart=0;var AUaccordion=/*#__PURE__*/function(_React$PureComponent){_inherits(AUaccordion,_React$PureComponent);/**
	 * Constructor
	 * Create state and iterate over a unique ID
	 *
	 * @param  {object}  props - The props object
	 */function AUaccordion(props){var _this;_classCallCheck(this,AUaccordion);_this=_possibleConstructorReturn(this,_getPrototypeOf(AUaccordion).call(this,props));var header=props.header,closed=props.closed,speed=props.speed,onOpen=props.onOpen,afterOpen=props.afterOpen,onClose=props.onClose,afterClose=props.afterClose,dark=props.dark,_props$className=props.className,className=_props$className===void 0?"":_props$className,children=props.children,attributeOptions=_objectWithoutProperties(props,["header","closed","speed","onOpen","afterOpen","onClose","afterClose","dark","className","children"]);_this.setAriaRoles=_this.setAriaRoles.bind(_assertThisInitialized(_this));_this.toggleClasses=_this.toggleClasses.bind(_assertThisInitialized(_this));_this.removeClass=_this.removeClass.bind(_assertThisInitialized(_this));_this.addClass=_this.addClass.bind(_assertThisInitialized(_this));_this.accordionToggle=_this.accordionToggle.bind(_assertThisInitialized(_this));_this.accordionOpen=_this.accordionOpen.bind(_assertThisInitialized(_this));_this.accordionClose=_this.accordionClose.bind(_assertThisInitialized(_this));_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));_this.className=className;_this.attributeOptions=attributeOptions;// Generate a unique ID and our css class
IDstart++;_this.ID="accordion".concat(IDstart);_this.closeClass=_this.props.closed?"au-accordion--closed":"";return _this}/**
	 * Handle state if supplied
	 */_createClass(AUaccordion,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.closed!==prevProps.closed){if(this.props.closed){this.accordionClose(this.accordionHeader)}else{this.accordionOpen(this.accordionHeader)}}}/**
	 * Set the correct Aria roles for given element on the accordion title and body
	 *
	 * @param  {object} element  - The DOM element we want to set attributes for
	 * @param  {object} target   - The DOM element we want to set attributes for
	 * @param  {string} state    - The DOM element we want to set attributes for
	 */},{key:"setAriaRoles",value:function setAriaRoles(element,target,state){if(state==="closing"){element.setAttribute("aria-expanded",false)}else{element.setAttribute("aria-expanded",true)}}/**
	 * IE8 compatible function for replacing classes on a DOM node
	 *
	 * @param  {object} element       - The DOM element we want to toggle classes on
	 * @param  {object} target        - The DOM element we want to toggle classes on
	 * @param  {object} state         - The current state of the animation on the element
	 * @param  {string} openingClass  - The firstClass you want to toggle on the DOM node
	 * @param  {string} closingClass  - The secondClass you want to toggle on the DOM node
	 */},{key:"toggleClasses",value:function toggleClasses(element,state,openingClass,closingClass){if(state==="opening"||state==="open"){var oldClass=openingClass||"au-accordion--closed";var newClass=closingClass||"au-accordion--open"}else{var oldClass=closingClass||"au-accordion--open";var newClass=openingClass||"au-accordion--closed"}this.removeClass(element,oldClass);this.addClass(element,newClass)}/**
	 * IE8 compatible function for removing a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be removed
	 */},{key:"removeClass",value:function removeClass(element,className){if(element.classList){element.classList.remove(className)}else{element.className=element.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}}/**
	 * IE8 compatible function for adding a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be added
	 */},{key:"addClass",value:function addClass(element,className){if(element.classList){element.classList.add(className)}else{element.className=element.className+" "+className}}/**
	 * Toggle an accordion element
	 *
	 * @param  {string}  elements  - The DOM node/s to toggle
	 * @param  {integer} speed     - The speed in ms for the animation
	 * @param  {object}  callbacks - An object of four optional callbacks: { onOpen, afterOpen, onClose, afterClose }
	 *
	 */},{key:"accordionToggle",value:function accordionToggle(elements,speed,callbacks){var SetAriaRoles=this.setAriaRoles;var ToggleClasses=this.toggleClasses;// stop event propagation
try{window.event.cancelBubble=true;event.stopPropagation()}catch(error){}// making sure we can iterate over just one DOM element
if(elements.length===undefined){elements=[elements]}// check this once
if(_typeof(callbacks)!="object"){callbacks={}}for(var i=0;i<elements.length;i++){var element=elements[i];var targetId=element.getAttribute("aria-controls");var target=document.getElementById(targetId);if(target==null){throw new Error("AU.animate.Toggle cannot find the target to be toggled from inside aria-controls")}target.style.display="block";(function(element){_animate.default.animate.Toggle({element:target,property:"height",speed:speed||250,prefunction:function prefunction(target,state){if(state==="opening"){target.style.display="block";// run when opening
if(typeof callbacks.onOpen==="function"){callbacks.onOpen()}}else{// run when closing
if(typeof callbacks.onClose==="function"){callbacks.onClose()}}SetAriaRoles(element,target,state);ToggleClasses(element,state)},postfunction:function postfunction(target,state){if(state==="closed"){target.style.display="";target.style.height="";// run after opening
if(typeof callbacks.afterOpen==="function"){callbacks.afterClose()}}else{// run after closing
if(typeof callbacks.afterClose==="function"){callbacks.afterOpen()}}ToggleClasses(target,state)}})})(element)}return false}/**
	 * Open a group of accordion elements
	 *
	 * @param  {string}  elements  - The DOM node/s to toggle
	 * @param  {integer} speed     - The speed in ms for the animation
	 *
	 */},{key:"accordionOpen",value:function accordionOpen(elements,speed){var ToggleClasses=this.toggleClasses;// stop event propagation
try{window.event.cancelBubble=true;event.stopPropagation()}catch(error){}if(elements.length===undefined){elements=[elements]}for(var i=0;i<elements.length;i++){var element=elements[i];var targetId=element.getAttribute("aria-controls");var target=document.getElementById(targetId);// letâ€™s find out if this accordion is still closed
var height=0;if(typeof getComputedStyle!=="undefined"){height=window.getComputedStyle(target).height}else{height=target.currentStyle.height}if(parseInt(height)===0){target.style.height="0px"}target.style.display="";this.toggleClasses(target,"opening");this.toggleClasses(element,"opening");this.setAriaRoles(element,target,"opening");(function(target,speed,element){_animate.default.animate.Run({element:target,property:"height",endSize:"auto",speed:speed||250,callback:function callback(){ToggleClasses(element,"opening")}})})(target,speed,element)}}/**
	 * Close a group of accordion elements
	 *
	 * @param  {string}  elements  - The DOM node/s to toggle
	 * @param  {integer} speed     - The speed in ms for the animation
	 *
	 */},{key:"accordionClose",value:function accordionClose(elements,speed){var ToggleClasses=this.toggleClasses;// stop event propagation
try{window.event.cancelBubble=true;event.stopPropagation()}catch(error){}if(elements.length===undefined){elements=[elements]}for(var i=0;i<elements.length;i++){var element=elements[i];var targetId=element.getAttribute("aria-controls");var target=document.getElementById(targetId);this.toggleClasses(element,"closing");this.setAriaRoles(element,target,"closing");(function(target,speed){_animate.default.animate.Run({element:target,property:"height",endSize:0,speed:speed||250,callback:function callback(){target.style.display="";target.style.height="";ToggleClasses(target,"close")}})})(target,speed)}}/**
	 * Toggle an accordion on click
	 *
	 * @param  {event object} event - The event object of the click
	 */},{key:"toggle",value:function toggle(event){event.preventDefault();this.accordionToggle(this.accordionHeader,this.props.speed,{onOpen:this.props.onOpen,afterOpen:this.props.afterOpen,onClose:this.props.onClose,afterClose:this.props.afterClose})}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement("section",_extends({className:"au-accordion ".concat(this.className).concat(this.props.dark?" au-accordion--dark":"")},this.attributeOptions),_react.default.createElement("button",{className:"au-accordion__title js-au-accordion ".concat(this.closeClass),"aria-controls":this.ID,"aria-expanded":!this.props.closed,ref:function ref(accordionHeader){_this2.accordionHeader=accordionHeader},onClick:function onClick(event){return _this2.toggle(event)}},this.props.header),_react.default.createElement("div",{className:"au-accordion__body ".concat(this.closeClass),id:this.ID},_react.default.createElement("div",{className:"au-accordion__body-wrapper"},this.props.children)))}}]);return AUaccordion}(_react.default.PureComponent);;AUaccordion.propTypes={children:_propTypes.default.node.isRequired,header:_propTypes.default.string.isRequired,closed:_propTypes.default.bool,speed:_propTypes.default.number,dark:_propTypes.default.bool,onOpen:_propTypes.default.func,afterOpen:_propTypes.default.func,onClose:_propTypes.default.func,afterClose:_propTypes.default.func,className:_propTypes.default.string};AUaccordion.defaultProps={closed:false};var _default=AUaccordion;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYWN0LmVzNS5qcyJdLCJuYW1lcyI6WyJJRHN0YXJ0IiwiQVVhY2NvcmRpb24iLCJwcm9wcyIsImhlYWRlciIsImNsb3NlZCIsInNwZWVkIiwib25PcGVuIiwiYWZ0ZXJPcGVuIiwib25DbG9zZSIsImFmdGVyQ2xvc2UiLCJkYXJrIiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJhdHRyaWJ1dGVPcHRpb25zIiwic2V0QXJpYVJvbGVzIiwiYmluZCIsInRvZ2dsZUNsYXNzZXMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiYWNjb3JkaW9uVG9nZ2xlIiwiYWNjb3JkaW9uT3BlbiIsImFjY29yZGlvbkNsb3NlIiwidG9nZ2xlIiwiSUQiLCJjbG9zZUNsYXNzIiwicHJldlByb3BzIiwiYWNjb3JkaW9uSGVhZGVyIiwiZWxlbWVudCIsInRhcmdldCIsInN0YXRlIiwic2V0QXR0cmlidXRlIiwib3BlbmluZ0NsYXNzIiwiY2xvc2luZ0NsYXNzIiwib2xkQ2xhc3MiLCJuZXdDbGFzcyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlcGxhY2UiLCJSZWdFeHAiLCJzcGxpdCIsImpvaW4iLCJhZGQiLCJlbGVtZW50cyIsImNhbGxiYWNrcyIsIlNldEFyaWFSb2xlcyIsIlRvZ2dsZUNsYXNzZXMiLCJ3aW5kb3ciLCJldmVudCIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImVycm9yIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaSIsInRhcmdldElkIiwiZ2V0QXR0cmlidXRlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIkVycm9yIiwic3R5bGUiLCJkaXNwbGF5IiwiQVUiLCJhbmltYXRlIiwiVG9nZ2xlIiwicHJvcGVydHkiLCJwcmVmdW5jdGlvbiIsInBvc3RmdW5jdGlvbiIsImhlaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJjdXJyZW50U3R5bGUiLCJwYXJzZUludCIsIlJ1biIsImVuZFNpemUiLCJjYWxsYmFjayIsInByZXZlbnREZWZhdWx0IiwiUmVhY3QiLCJQdXJlQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwibm9kZSIsImlzUmVxdWlyZWQiLCJzdHJpbmciLCJib29sIiwibnVtYmVyIiwiZnVuYyIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6IjZGQVNBLG9EQUNBLDZEQUVBLGdFQU1BLDZCLG83RkFHQSxHQUFJQSxDQUFBQSxPQUFPLENBQUcsQ0FBZCxDLEdBRU1DLENBQUFBLFcseUZBQ0w7Ozs7O0lBTUEscUJBQWFDLEtBQWIsQ0FBcUIsNkNBQ3BCLDZFQUFPQSxLQUFQLEdBRG9CLEdBR1pDLENBQUFBLE1BSFksQ0FHMkdELEtBSDNHLENBR1pDLE1BSFksQ0FHSkMsTUFISSxDQUcyR0YsS0FIM0csQ0FHSkUsTUFISSxDQUdJQyxLQUhKLENBRzJHSCxLQUgzRyxDQUdJRyxLQUhKLENBR1dDLE1BSFgsQ0FHMkdKLEtBSDNHLENBR1dJLE1BSFgsQ0FHbUJDLFNBSG5CLENBRzJHTCxLQUgzRyxDQUdtQkssU0FIbkIsQ0FHOEJDLE9BSDlCLENBRzJHTixLQUgzRyxDQUc4Qk0sT0FIOUIsQ0FHdUNDLFVBSHZDLENBRzJHUCxLQUgzRyxDQUd1Q08sVUFIdkMsQ0FHbURDLElBSG5ELENBRzJHUixLQUgzRyxDQUdtRFEsSUFIbkQsa0JBRzJHUixLQUgzRyxDQUd5RFMsU0FIekQsQ0FHeURBLFNBSHpELDJCQUdxRSxFQUhyRSxrQkFHeUVDLFFBSHpFLENBRzJHVixLQUgzRyxDQUd5RVUsUUFIekUsQ0FHc0ZDLGdCQUh0RiwwQkFHMkdYLEtBSDNHLHdHQUtwQixNQUFLWSxZQUFMLENBQXdCLE1BQUtBLFlBQUwsQ0FBa0JDLElBQWxCLCtCQUF4QixDQUNBLE1BQUtDLGFBQUwsQ0FBd0IsTUFBS0EsYUFBTCxDQUFtQkQsSUFBbkIsK0JBQXhCLENBQ0EsTUFBS0UsV0FBTCxDQUF3QixNQUFLQSxXQUFMLENBQWlCRixJQUFqQiwrQkFBeEIsQ0FDQSxNQUFLRyxRQUFMLENBQXdCLE1BQUtBLFFBQUwsQ0FBY0gsSUFBZCwrQkFB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QUFVTSxJQVRDLENBVXZCekUsU0FBUyxDQUFFbUUsbUJBQVVHLE1BVkUsQ0FBeEIsQ0FhQWhGLFdBQVcsQ0FBQ29GLFlBQVosQ0FBMkIsQ0FDMUJqRixNQUFNLENBQUUsS0FEa0IsQ0FBM0IsQyxhQUllSCxXIiwic291cmNlc0NvbnRlbnQiOlsiLyohIEBnb3YuYXUvYWNjb3JkaW9uIHY3LjAuOCAqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcbiAqIEFjY29yZGlvbiBmdW5jdGlvblxuICpcbiAqIEEgY29tcG9uZW50IHRvIGFsbG93IHVzZXJzIHRvIHNob3cgb3IgaGlkZSBwYWdlIGVsZW1lbnRzLlxuICpcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmltcG9ydCBBVSBmcm9tICdAZ292LmF1L2FuaW1hdGUnOyAvLyBpbnRlcmRlcGVuZGVuY3kgd2l0aCBvdXIgYW5pbWF0ZSBsaWJcblxuXG4vLyBUaGUgZm9sbG93aW5nIGxpbmUgd2lsbCBiZSByZXBsYWNlZCBhdXRvbWF0aWNhbGx5IHdpdGggZ2VuZXJpYyBpbXBvcnRzIGZvciB0aGUgRVM1IHBpcGVsaW5lLlxuLy8gWW91IGNhbiBzYWZlbHkgaWdub3JlIHRoaXMgYml0IGlmIHlvdSB1c2UgdGhpcyBtb2R1bGUgd2l0aCBwYW5jYWtlXG4vL1xuaW1wb3J0ICcuLi9jc3Mvc3R5bGVzLmNzcyc7XG5cblxubGV0IElEc3RhcnQgPSAwO1xuXG5jbGFzcyBBVWFjY29yZGlvbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuXHQvKipcblx0ICogQ29uc3RydWN0b3Jcblx0ICogQ3JlYXRlIHN0YXRlIGFuZCBpdGVyYXRlIG92ZXIgYSB1bmlxdWUgSURcblx0ICpcblx0ICogQHBhcmFtICB7b2JqZWN0fSAgcHJvcHMgLSBUaGUgcHJvcHMgb2JqZWN0XG5cdCAqL1xuXHRjb25zdHJ1Y3RvciggcHJvcHMgKSB7XG5cdFx0c3VwZXIoIHByb3BzICk7XG5cblx0XHRjb25zdCB7IGhlYWRlciwgY2xvc2VkLCBzcGVlZCwgb25PcGVuLCBhZnRlck9wZW4sIG9uQ2xvc2UsIGFmdGVyQ2xvc2UsIGRhcmssIGNsYXNzTmFtZSA9ICcnLCBjaGlsZHJlbiwgLi4uYXR0cmlidXRlT3B0aW9ucyB9ID0gcHJvcHM7XG5cblx0XHR0aGlzLnNldEFyaWFSb2xlcyAgICAgPSB0aGlzLnNldEFyaWFSb2xlcy5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy50b2dnbGVDbGFzc2VzICAgID0gdGhpcy50b2dnbGVDbGFzc2VzLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLnJlbW92ZUNsYXNzICAgICAgPSB0aGlzLnJlbW92ZUNsYXNzLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLmFkZENsYXNzICAgICAgICAgPSB0aGlzLmFkZENsYXNzLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLmFjY29yZGlvblRvZ2dsZSAgPSB0aGlzLmFjY29yZGlvblRvZ2dsZS5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy5hY2NvcmRpb25PcGVuICAgID0gdGhpcy5hY2NvcmRpb25PcGVuLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLmFjY29yZGlvbkNsb3NlICAgPSB0aGlzLmFjY29yZGlvbkNsb3NlLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLnRvZ2dsZSAgICAgICAgICAgPSB0aGlzLnRvZ2dsZS5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy5jbGFzc05hbWUgICAgICAgID0gY2xhc3NOYW1lO1xuXHRcdHRoaXMuYXR0cmlidXRlT3B0aW9ucyA9IGF0dHJpYnV0ZU9wdGlvbnM7XG5cblx0XHQvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBhbmQgb3VyIGNzcyBjbGFzc1xuXHRcdElEc3RhcnQgKys7XG5cblx0XHR0aGlzLklEID0gYGFjY29yZGlvbiR7IElEc3RhcnQgfWA7XG5cdFx0dGhpcy5jbG9zZUNsYXNzID0gdGhpcy5wcm9wcy5jbG9zZWQgPyAnYXUtYWNjb3JkaW9uLS1jbG9zZWQnIDogJyc7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgc3RhdGUgaWYgc3VwcGxpZWRcblx0ICovXG5cdGNvbXBvbmVudERpZFVwZGF0ZSggcHJldlByb3BzICkge1xuXHRcdGlmICggdGhpcy5wcm9wcy5jbG9zZWQgIT09IHByZXZQcm9wcy5jbG9zZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMucHJvcHMuY2xvc2VkICkge1xuXHRcdFx0XHR0aGlzLmFjY29yZGlvbkNsb3NlKCB0aGlzLmFjY29yZGlvbkhlYWRlciApO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRoaXMuYWNjb3JkaW9uT3BlbiggdGhpcy5hY2NvcmRpb25IZWFkZXIgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlY3QgQXJpYSByb2xlcyBmb3IgZ2l2ZW4gZWxlbWVudCBvbiB0aGUgYWNjb3JkaW9uIHRpdGxlIGFuZCBib2R5XG5cdCAqXG5cdCAqIEBwYXJhbSAge29iamVjdH0gZWxlbWVudCAgLSBUaGUgRE9NIGVsZW1lbnQgd2Ugd2FudCB0byBzZXQgYXR0cmlidXRlcyBmb3Jcblx0ICogQHBhcmFtICB7b2JqZWN0fSB0YXJnZXQgICAtIFRoZSBET00gZWxlbWVudCB3ZSB3YW50IHRvIHNldCBhdHRyaWJ1dGVzIGZvclxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IHN0YXRlICAgIC0gVGhlIERPTSBlbGVtZW50IHdlIHdhbnQgdG8gc2V0IGF0dHJpYnV0ZXMgZm9yXG5cdCAqL1xuXHRzZXRBcmlhUm9sZXMoIGVsZW1lbnQsIHRhcmdldCwgc3RhdGUgKSB7XG5cblx0XHRpZiggc3RhdGUgPT09ICdjbG9zaW5nJyApIHtcblx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsIGZhbHNlICk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgdHJ1ZSApO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIElFOCBjb21wYXRpYmxlIGZ1bmN0aW9uIGZvciByZXBsYWNpbmcgY2xhc3NlcyBvbiBhIERPTSBub2RlXG5cdCAqXG5cdCAqIEBwYXJhbSAge29iamVjdH0gZWxlbWVudCAgICAgICAtIFRoZSBET00gZWxlbWVudCB3ZSB3YW50IHRvIHRvZ2dsZSBjbGFzc2VzIG9uXG5cdCAqIEBwYXJhbSAge29iamVjdH0gdGFyZ2V0ICAgICAgICAtIFRoZSBET00gZWxlbWVudCB3ZSB3YW50IHRvIHRvZ2dsZSBjbGFzc2VzIG9uXG5cdCAqIEBwYXJhbSAge29iamVjdH0gc3RhdGUgICAgICAgICAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhbmltYXRpb24gb24gdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtICB7c3RyaW5nfSBvcGVuaW5nQ2xhc3MgIC0gVGhlIGZpcnN0Q2xhc3MgeW91IHdhbnQgdG8gdG9nZ2xlIG9uIHRoZSBET00gbm9kZVxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IGNsb3NpbmdDbGFzcyAgLSBUaGUgc2Vjb25kQ2xhc3MgeW91IHdhbnQgdG8gdG9nZ2xlIG9uIHRoZSBET00gbm9kZVxuXHQgKi9cblx0dG9nZ2xlQ2xhc3NlcyggZWxlbWVudCwgc3RhdGUsIG9wZW5pbmdDbGFzcywgY2xvc2luZ0NsYXNzICkge1xuXHRcdGlmKCBzdGF0ZSA9PT0gJ29wZW5pbmcnIHx8IHN0YXRlID09PSAnb3BlbicgKSB7XG5cdFx0XHR2YXIgb2xkQ2xhc3MgPSBvcGVuaW5nQ2xhc3MgfHwgJ2F1LWFjY29yZGlvbi0tY2xvc2VkJztcblx0XHRcdHZhciBuZXdDbGFzcyA9IGNsb3NpbmdDbGFzcyB8fCAnYXUtYWNjb3JkaW9uLS1vcGVuJztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgb2xkQ2xhc3MgPSBjbG9zaW5nQ2xhc3MgfHwgJ2F1LWFjY29yZGlvbi0tb3Blbic7XG5cdFx0XHR2YXIgbmV3Q2xhc3MgPSBvcGVuaW5nQ2xhc3MgfHwgJ2F1LWFjY29yZGlvbi0tY2xvc2VkJztcblx0XHR9XG5cblx0XHR0aGlzLnJlbW92ZUNsYXNzKCBlbGVtZW50LCBvbGRDbGFzcyApO1xuXHRcdHRoaXMuYWRkQ2xhc3MoIGVsZW1lbnQsIG5ld0NsYXNzICk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBJRTggY29tcGF0aWJsZSBmdW5jdGlvbiBmb3IgcmVtb3ZpbmcgYSBjbGFzc1xuXHQgKlxuXHQgKiBAcGFyYW0gIHtvYmplY3R9IGVsZW1lbnQgICAtIFRoZSBET00gZWxlbWVudCB3ZSB3YW50IHRvIG1hbmlwdWxhdGVcblx0ICogQHBhcmFtICB7b2JqZWN0fSBjbGFzc05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY2xhc3MgdG8gYmUgcmVtb3ZlZFxuXHQgKi9cblx0cmVtb3ZlQ2xhc3MoIGVsZW1lbnQsIGNsYXNzTmFtZSApIHtcblx0XHRpZiggZWxlbWVudC5jbGFzc0xpc3QgKSB7XG5cdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSggbmV3IFJlZ0V4cChcIihefFxcXFxiKVwiICsgY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5qb2luKFwifFwiKSArIFwiKFxcXFxifCQpXCIsIFwiZ2lcIiksIFwiIFwiICk7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogSUU4IGNvbXBhdGlibGUgZnVuY3Rpb24gZm9yIGFkZGluZyBhIGNsYXNzXG5cdCAqXG5cdCAqIEBwYXJhbSAge29iamVjdH0gZWxlbWVudCAgIC0gVGhlIERPTSBlbGVtZW50IHdlIHdhbnQgdG8gbWFuaXB1bGF0ZVxuXHQgKiBAcGFyYW0gIHtvYmplY3R9IGNsYXNzTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjbGFzcyB0byBiZSBhZGRlZFxuXHQgKi9cblx0YWRkQ2xhc3MoIGVsZW1lbnQsIGNsYXNzTmFtZSApIHtcblx0XHRpZiggZWxlbWVudC5jbGFzc0xpc3QgKSB7XG5cdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUgKyBcIiBcIiArIGNsYXNzTmFtZTtcblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgYW4gYWNjb3JkaW9uIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtICB7c3RyaW5nfSAgZWxlbWVudHMgIC0gVGhlIERPTSBub2RlL3MgdG8gdG9nZ2xlXG5cdCAqIEBwYXJhbSAge2ludGVnZXJ9IHNwZWVkICAgICAtIFRoZSBzcGVlZCBpbiBtcyBmb3IgdGhlIGFuaW1hdGlvblxuXHQgKiBAcGFyYW0gIHtvYmplY3R9ICBjYWxsYmFja3MgLSBBbiBvYmplY3Qgb2YgZm91ciBvcHRpb25hbCBjYWxsYmFja3M6IHsgb25PcGVuLCBhZnRlck9wZW4sIG9uQ2xvc2UsIGFmdGVyQ2xvc2UgfVxuXHQgKlxuXHQgKi9cblx0YWNjb3JkaW9uVG9nZ2xlKCBlbGVtZW50cywgc3BlZWQsIGNhbGxiYWNrcyApIHtcblx0XHRjb25zdCBTZXRBcmlhUm9sZXMgPSB0aGlzLnNldEFyaWFSb2xlcztcblx0XHRjb25zdCBUb2dnbGVDbGFzc2VzID0gdGhpcy50b2dnbGVDbGFzc2VzO1xuXG5cdFx0Ly8gc3RvcCBldmVudCBwcm9wYWdhdGlvblxuXHRcdHRyeSB7XG5cdFx0XHR3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0XHRjYXRjaCggZXJyb3IgKSB7fVxuXG5cdFx0Ly8gbWFraW5nIHN1cmUgd2UgY2FuIGl0ZXJhdGUgb3ZlciBqdXN0IG9uZSBET00gZWxlbWVudFxuXHRcdGlmKCBlbGVtZW50cy5sZW5ndGggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGVsZW1lbnRzID0gWyBlbGVtZW50cyBdO1xuXHRcdH1cblxuXHRcdC8vIGNoZWNrIHRoaXMgb25jZVxuXHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzICE9ICdvYmplY3QnICkge1xuXHRcdFx0Y2FsbGJhY2tzID0ge307XG5cdFx0fVxuXG5cdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKyApIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuXHRcdFx0dmFyIHRhcmdldElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcblx0XHRcdHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGFyZ2V0SWQgKTtcblxuXHRcdFx0aWYoIHRhcmdldCA9PSBudWxsICkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0FVLmFuaW1hdGUuVG9nZ2xlIGNhbm5vdCBmaW5kIHRoZSB0YXJnZXQgdG8gYmUgdG9nZ2xlZCBmcm9tIGluc2lkZSBhcmlhLWNvbnRyb2xzJyk7XG5cdFx0XHR9XG5cblx0XHRcdHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuXG5cdFx0XHQoZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0XHRcdEFVLmFuaW1hdGUuVG9nZ2xlKHtcblx0XHRcdFx0XHRlbGVtZW50OiB0YXJnZXQsXG5cdFx0XHRcdFx0cHJvcGVydHk6ICdoZWlnaHQnLFxuXHRcdFx0XHRcdHNwZWVkOiBzcGVlZCB8fCAyNTAsXG5cdFx0XHRcdFx0cHJlZnVuY3Rpb246IGZ1bmN0aW9uKCB0YXJnZXQsIHN0YXRlICkge1xuXHRcdFx0XHRcdFx0aWYoIHN0YXRlID09PSAnb3BlbmluZycgKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuXHRcdFx0XHRcdFx0XHQvLyBydW4gd2hlbiBvcGVuaW5nXG5cdFx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFja3Mub25PcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBydW4gd2hlbiBjbG9zaW5nXG5cdFx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLm9uQ2xvc2UoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRTZXRBcmlhUm9sZXMoIGVsZW1lbnQsIHRhcmdldCwgc3RhdGUgKTtcblx0XHRcdFx0XHRcdFRvZ2dsZUNsYXNzZXMoIGVsZW1lbnQsIHN0YXRlICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwb3N0ZnVuY3Rpb246IGZ1bmN0aW9uKCB0YXJnZXQsIHN0YXRlICkge1xuXHRcdFx0XHRcdFx0aWYoIHN0YXRlID09PSAnY2xvc2VkJyApIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnN0eWxlLmhlaWdodCA9ICcnO1xuXG5cdFx0XHRcdFx0XHRcdC8vIHJ1biBhZnRlciBvcGVuaW5nXG5cdFx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLmFmdGVyT3BlbiA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFja3MuYWZ0ZXJDbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBydW4gYWZ0ZXIgY2xvc2luZ1xuXHRcdFx0XHRcdFx0XHRpZiggdHlwZW9mIGNhbGxiYWNrcy5hZnRlckNsb3NlID09PSAnZnVuY3Rpb24nICkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5hZnRlck9wZW4oKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRUb2dnbGVDbGFzc2VzKCB0YXJnZXQsIHN0YXRlICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9KSggZWxlbWVudCApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXG5cdH1cblxuXG5cdC8qKlxuXHQgKiBPcGVuIGEgZ3JvdXAgb2YgYWNjb3JkaW9uIGVsZW1lbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gIGVsZW1lbnRzICAtIFRoZSBET00gbm9kZS9zIHRvIHRvZ2dsZVxuXHQgKiBAcGFyYW0gIHtpbnRlZ2VyfSBzcGVlZCAgICAgLSBUaGUgc3BlZWQgaW4gbXMgZm9yIHRoZSBhbmltYXRpb25cblx0ICpcblx0ICovXG5cdGFjY29yZGlvbk9wZW4oIGVsZW1lbnRzLCBzcGVlZCApIHtcblx0XHRjb25zdCBUb2dnbGVDbGFzc2VzID0gdGhpcy50b2dnbGVDbGFzc2VzO1xuXG5cdFx0Ly8gc3RvcCBldmVudCBwcm9wYWdhdGlvblxuXHRcdHRyeSB7XG5cdFx0XHR3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0XHRjYXRjaCggZXJyb3IgKSB7fVxuXG5cdFx0aWYoIGVsZW1lbnRzLmxlbmd0aCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0ZWxlbWVudHMgPSBbIGVsZW1lbnRzIF07XG5cdFx0fVxuXG5cdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKyApIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuXHRcdFx0dmFyIHRhcmdldElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcblx0XHRcdHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGFyZ2V0SWQgKTtcblxuXHRcdFx0Ly8gbGV04oCZcyBmaW5kIG91dCBpZiB0aGlzIGFjY29yZGlvbiBpcyBzdGlsbCBjbG9zZWRcblx0XHRcdHZhciBoZWlnaHQgPSAwO1xuXHRcdFx0aWYoIHR5cGVvZiBnZXRDb21wdXRlZFN0eWxlICE9PSAndW5kZWZpbmVkJyApIHtcblx0XHRcdFx0aGVpZ2h0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIHRhcmdldCApLmhlaWdodDtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRoZWlnaHQgPSB0YXJnZXQuY3VycmVudFN0eWxlLmhlaWdodDtcblx0XHRcdH1cblxuXHRcdFx0aWYoIHBhcnNlSW50KCBoZWlnaHQgKSA9PT0gMCApIHtcblx0XHRcdFx0dGFyZ2V0LnN0eWxlLmhlaWdodCA9ICcwcHgnO1xuXHRcdFx0fVxuXG5cdFx0XHR0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0dGhpcy50b2dnbGVDbGFzc2VzKCB0YXJnZXQsICdvcGVuaW5nJyApO1xuXHRcdFx0dGhpcy50b2dnbGVDbGFzc2VzKCBlbGVtZW50LCAnb3BlbmluZycgKTtcblx0XHRcdHRoaXMuc2V0QXJpYVJvbGVzKCBlbGVtZW50LCB0YXJnZXQsICdvcGVuaW5nJyApO1xuXG5cdFx0XHQoZnVuY3Rpb24oIHRhcmdldCwgc3BlZWQsIGVsZW1lbnQgKSB7XG5cdFx0XHRcdEFVLmFuaW1hdGUuUnVuKHtcblx0XHRcdFx0XHRlbGVtZW50OiB0YXJnZXQsXG5cdFx0XHRcdFx0cHJvcGVydHk6ICdoZWlnaHQnLFxuXHRcdFx0XHRcdGVuZFNpemU6ICdhdXRvJyxcblx0XHRcdFx0XHRzcGVlZDogc3BlZWQgfHwgMjUwLFxuXHRcdFx0XHRcdGNhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFRvZ2dsZUNsYXNzZXMoIGVsZW1lbnQsICdvcGVuaW5nJyApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSkoIHRhcmdldCwgc3BlZWQsIGVsZW1lbnQgKTtcblx0XHR9XG5cblx0fVxuXG5cblx0LyoqXG5cdCAqIENsb3NlIGEgZ3JvdXAgb2YgYWNjb3JkaW9uIGVsZW1lbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gIGVsZW1lbnRzICAtIFRoZSBET00gbm9kZS9zIHRvIHRvZ2dsZVxuXHQgKiBAcGFyYW0gIHtpbnRlZ2VyfSBzcGVlZCAgICAgLSBUaGUgc3BlZWQgaW4gbXMgZm9yIHRoZSBhbmltYXRpb25cblx0ICpcblx0ICovXG5cdGFjY29yZGlvbkNsb3NlKCBlbGVtZW50cywgc3BlZWQgKSB7XG5cblx0XHRjb25zdCBUb2dnbGVDbGFzc2VzID0gdGhpcy50b2dnbGVDbGFzc2VzO1xuXG5cdFx0Ly8gc3RvcCBldmVudCBwcm9wYWdhdGlvblxuXHRcdHRyeSB7XG5cdFx0XHR3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0XHRjYXRjaCggZXJyb3IgKSB7fVxuXG5cdFx0aWYoIGVsZW1lbnRzLmxlbmd0aCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0ZWxlbWVudHMgPSBbIGVsZW1lbnRzIF07XG5cdFx0fVxuXG5cdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKyApIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSBlbGVtZW50c1sgaSBdO1xuXHRcdFx0dmFyIHRhcmdldElkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcblx0XHRcdHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGFyZ2V0SWQgKTtcblxuXHRcdFx0dGhpcy50b2dnbGVDbGFzc2VzKCBlbGVtZW50LCAnY2xvc2luZycgKTtcblx0XHRcdHRoaXMuc2V0QXJpYVJvbGVzKCBlbGVtZW50LCB0YXJnZXQsICdjbG9zaW5nJyApO1xuXG5cdFx0XHQoZnVuY3Rpb24oIHRhcmdldCwgc3BlZWQgKSB7XG5cdFx0XHRcdEFVLmFuaW1hdGUuUnVuKHtcblx0XHRcdFx0XHRlbGVtZW50OiB0YXJnZXQsXG5cdFx0XHRcdFx0cHJvcGVydHk6ICdoZWlnaHQnLFxuXHRcdFx0XHRcdGVuZFNpemU6IDAsXG5cdFx0XHRcdFx0c3BlZWQ6IHNwZWVkIHx8IDI1MCxcblx0XHRcdFx0XHRjYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0XHRcdFx0dGFyZ2V0LnN0eWxlLmhlaWdodCA9ICcnO1xuXHRcdFx0XHRcdFx0VG9nZ2xlQ2xhc3NlcyggdGFyZ2V0LCAnY2xvc2UnICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9KSggdGFyZ2V0LCBzcGVlZCApO1xuXHRcdH1cblxuXHR9XG5cblxuXHQvKipcblx0ICogVG9nZ2xlIGFuIGFjY29yZGlvbiBvbiBjbGlja1xuXHQgKlxuXHQgKiBAcGFyYW0gIHtldmVudCBvYmplY3R9IGV2ZW50IC0gVGhlIGV2ZW50IG9iamVjdCBvZiB0aGUgY2xpY2tcblx0ICovXG5cdHRvZ2dsZSggZXZlbnQgKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHRoaXMuYWNjb3JkaW9uVG9nZ2xlKCB0aGlzLmFjY29yZGlvbkhlYWRlciwgdGhpcy5wcm9wcy5zcGVlZCwge1xuXHRcdFx0b25PcGVuOiB0aGlzLnByb3BzLm9uT3Blbixcblx0XHRcdGFmdGVyT3BlbjogdGhpcy5wcm9wcy5hZnRlck9wZW4sXG5cdFx0XHRvbkNsb3NlOiB0aGlzLnByb3BzLm9uQ2xvc2UsXG5cdFx0XHRhZnRlckNsb3NlOiB0aGlzLnByb3BzLmFmdGVyQ2xvc2UsXG5cdFx0fSk7XG5cdH1cblxuXG5cdHJlbmRlcigpIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0PHNlY3Rpb24gY2xhc3NOYW1lPXsgYGF1LWFjY29yZGlvbiAkeyB0aGlzLmNsYXNzTmFtZSB9JHsgdGhpcy5wcm9wcy5kYXJrID8gJyBhdS1hY2NvcmRpb24tLWRhcmsnIDogJycgfWAgfSB7IC4uLnRoaXMuYXR0cmlidXRlT3B0aW9ucyB9PlxuXHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0Y2xhc3NOYW1lPXtgYXUtYWNjb3JkaW9uX190aXRsZSBqcy1hdS1hY2NvcmRpb24gJHsgdGhpcy5jbG9zZUNsYXNzIH1gfVxuXHRcdFx0XHRcdGFyaWEtY29udHJvbHM9eyB0aGlzLklEIH1cblx0XHRcdFx0XHRhcmlhLWV4cGFuZGVkPXsgIXRoaXMucHJvcHMuY2xvc2VkIH1cblx0XHRcdFx0XHRyZWY9eyBhY2NvcmRpb25IZWFkZXIgPT4geyB0aGlzLmFjY29yZGlvbkhlYWRlciA9IGFjY29yZGlvbkhlYWRlciB9IH1cblx0XHRcdFx0XHRvbkNsaWNrPXsgKCBldmVudCApID0+IHRoaXMudG9nZ2xlKCBldmVudCApIH0+XG5cdFx0XHRcdFx0XHR7IHRoaXMucHJvcHMuaGVhZGVyIH1cblx0XHRcdFx0PC9idXR0b24+XG5cblx0XHRcdFx0PGRpdlxuXHRcdFx0XHRcdGNsYXNzTmFtZT17YGF1LWFjY29yZGlvbl9fYm9keSAkeyB0aGlzLmNsb3NlQ2xhc3MgfWB9XG5cdFx0XHRcdFx0aWQ9eyB0aGlzLklEIH0+XG5cdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJhdS1hY2NvcmRpb25fX2JvZHktd3JhcHBlclwiPlxuXG5cdFx0XHRcdFx0XHR7IHRoaXMucHJvcHMuY2hpbGRyZW4gfVxuXG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9zZWN0aW9uPlxuXHRcdCk7XG5cdH1cbn07XG5cbkFVYWNjb3JkaW9uLnByb3BUeXBlcyA9IHtcblx0Y2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG5cdGhlYWRlcjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXHRjbG9zZWQ6IFByb3BUeXBlcy5ib29sLFxuXHRzcGVlZDogUHJvcFR5cGVzLm51bWJlcixcblx0ZGFyazogUHJvcFR5cGVzLmJvb2wsXG5cdG9uT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG5cdGFmdGVyT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG5cdG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXHRhZnRlckNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcblx0Y2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxufTtcblxuQVVhY2NvcmRpb24uZGVmYXVsdFByb3BzID0ge1xuXHRjbG9zZWQ6IGZhbHNlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQVVhY2NvcmRpb247XG4iXX0=